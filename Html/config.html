<!--
Propósito: Página de configuración global del marketplace. Permite al usuario seleccionar idioma, activar modo oscuro y elegir la preferencia de visualización (grid/lista). Las opciones se guardan en localStorage y se aplican en todas las páginas. Diseño accesible y multilingüe.
-->
<script>

// Traducción básica de textos y actualización dinámica
const traducciones = {
  es: {
    store: 'Tienda',
    cart: 'Carrito',
    contacts: 'Contactos',
    config: 'Configuración',
    help: 'Ayuda',
    configTitle: 'Configuraciones',
    idioma: 'Idioma:',
    dark: 'Modo oscuro:',
    view: 'Preferencias de visualización:',
    grid: 'Cuadrícula',
    list: 'Lista',
    save: 'Guardar cambios',
    logo: 'Fakestore',
    cartCount: 'Carrito (0)'
  },
  en: {
    store: 'Store',
    cart: 'Kart',
    contacts: 'Contacts',
    config: 'Configuration',
    help: 'Help',
    configTitle: 'Settings',
    idioma: 'Language:',
    dark: 'Dark mode:',
    view: 'View preferences:',
    grid: 'Grid',
    list: 'List',
    save: 'Save changes',
    logo: 'Fakestore',
    cartCount: 'Kart (0)'
  }
};
function aplicarTraduccionConfig(idioma) {
  const t = traducciones[idioma] || traducciones['es'];
  document.querySelector('.logo').textContent = t.logo;
  document.querySelector('a[href="index.html"]').textContent = t.store;
  document.querySelector('a[href="shopcart.html"]').textContent = t.cart;
  document.querySelector('a[href="contacts.html"]').textContent = t.contacts;
  document.querySelector('a[href="config.html"]').textContent = t.config;
  document.querySelector('a[href="support.html"]').textContent = t.help;
  document.querySelector('.cart span').textContent = t.cartCount;
  document.querySelector('main h2').textContent = t.configTitle;
  document.querySelector('label[for="idioma"]').textContent = t.idioma;
  document.querySelector('label[for="modoOscuro"]').textContent = t.dark;
  document.querySelector('label[for="vista"]').textContent = t.view;
  document.querySelector('option[value="grid"]').textContent = t.grid;
  document.querySelector('option[value="list"]').textContent = t.list;
  document.querySelector('button[type="submit"]').textContent = t.save;
}
document.addEventListener('DOMContentLoaded', function() {
  const idioma = localStorage.getItem('idioma') || 'es';
  aplicarTraduccionConfig(idioma);
  document.getElementById('idioma').value = idioma;
  document.getElementById('idioma').addEventListener('change', function() {
    aplicarTraduccionConfig(this.value);
  });
});
</script>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fakestore</title>
    <link rel="stylesheet" href="/Css/style.css">
</head>
<body>
    <header class="navbar">
        <div class="logo">Fakestore</div>
        <nav>
            <a href="index.html" class="navbarOptions">Store</a>
            <a href="shopcart.html"class="navbarOptions">Shopping kart</a>
            <a href="contacts.html" class="navbarOptions">Contacts</a>
            <a href="config.html" class="navbarOptions" style="color:#d1bfa7;font-weight:700;">Configuration</a>
            <a href="support.html" class="navbarOptions">Help</a>
        </nav>
        <div class="cart">
            <span>Kart (0)</span>
        </div>
    </header>
    <main>
        <h2 style="text-align:center;margin:32px 0 16px;">Configuraciones</h2>
        <section style="max-width:500px;margin:0 auto;background:var(--white);border-radius:18px;padding:32px 24px;box-shadow:0 2px 12px rgba(0,0,0,0.04);border:1px solid var(--gray-light);">
            <form id="configForm">
                <div style="margin-bottom:24px;">
                    <label for="idioma">Idioma:</label>
                    <select id="idioma" name="idioma" style="width:100%;margin-top:8px;">
                        <option value="es">Español</option>
                        <option value="en">English</option>
                    </select>
                </div>
                <div style="margin-bottom:24px;">
                    <label for="modoOscuro">Modo oscuro:</label>
                    <input type="checkbox" id="modoOscuro" name="modoOscuro" style="margin-left:8px;">
                </div>
                <div style="margin-bottom:24px;">
                    <label for="vista">Preferencias de visualización:</label>
                    <select id="vista" name="vista" style="width:100%;margin-top:8px;">
                        <option value="grid">Cuadrícula</option>
                        <option value="list">Lista</option>
                    </select>
                </div>
                <button type="submit" style="width:100%;background:var(--accent);color:#fff;font-weight:600;">Guardar cambios</button>
            </form>
        </section>
    </main>
    <script>

      // Modo oscuro
      const modoOscuro = document.getElementById('modoOscuro');
      modoOscuro.addEventListener('change', function() {
        if(this.checked) {
          document.body.classList.add('dark-mode');
        } else {
          document.body.classList.remove('dark-mode');
        }
      });

      // Idioma (solo cambia el atributo lang)
      document.getElementById('idioma').addEventListener('change', function() {
        document.documentElement.lang = this.value;
      });

      // Preferencias de visualización (solo muestra alerta de ejemplo)
      document.getElementById('vista').addEventListener('change', function() {
        alert('Preferencia de visualización cambiada a: ' + this.value);
      });
    </script>
    <script>

    // Guardar y aplicar configuraciones globales
    function aplicarConfiguraciones() {

      // Modo oscuro
      if(localStorage.getItem('modoOscuro') === 'true') {
        document.body.classList.add('dark-mode');
      } else {
        document.body.classList.remove('dark-mode');
      }

      // Idioma
      const idioma = localStorage.getItem('idioma') || 'es';
      document.documentElement.lang = idioma;

      // Preferencia de visualización
      const vista = localStorage.getItem('vista') || 'grid';
      const grid = document.getElementById('grid');
      if(grid) {
        grid.className = vista;
      }
    }

    aplicarConfiguraciones();
    window.addEventListener('storage', aplicarConfiguraciones);

    // Configuración desde el formulario
    const configForm = document.getElementById('configForm');
    if(configForm) {
      configForm.addEventListener('submit', function(e) {
        e.preventDefault();
        localStorage.setItem('idioma', document.getElementById('idioma').value);
        localStorage.setItem('modoOscuro', document.getElementById('modoOscuro').checked);
        localStorage.setItem('vista', document.getElementById('vista').value);
        aplicarConfiguraciones();
        alert('Configuraciones guardadas');
      });
    }
    // Cambios inmediatos
    if(document.getElementById('modoOscuro')) {
      document.getElementById('modoOscuro').addEventListener('change', function() {
        localStorage.setItem('modoOscuro', this.checked);
        aplicarConfiguraciones();
      });
    }
    if(document.getElementById('idioma')) {
      document.getElementById('idioma').addEventListener('change', function() {
        localStorage.setItem('idioma', this.value);
        aplicarConfiguraciones();
      });
    }
    if(document.getElementById('vista')) {
      document.getElementById('vista').addEventListener('change', function() {
        localStorage.setItem('vista', this.value);
        
        // Aquí podrías cambiar la visualización en la página de productos
      });
    }
    </script>
  </body>
</html>